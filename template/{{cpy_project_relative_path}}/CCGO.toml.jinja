# CCGO Project Configuration
# This file contains build and package configuration for the CCGO cross-platform C++ build system
# Similar to Cargo.toml for Rust projects

[project]
name = "{{ cpy_project_name | lower }}"
version = "{{ cpy_project_version }}"
description = "{{ cpy_project_name }} library"
{% if cpy_git_repo_url %}repository = "{{ cpy_git_repo_url }}"{% endif %}
{% if cpy_user_name %}authors = ["{{ cpy_user_name }} <{{ cpy_user_email }}>"]{% endif %}
license = "MIT"

[build]
# Output directory for build artifacts
output_dir = "cmake_build"

# Version info output path
verinfo_path = "include/{{ cpy_project_name | lower }}/base/"

# Generate JSON build metadata file
generate_json_metadata = true

# JSON metadata output path (relative to project root)
json_metadata_path = "build_info.json"

# CMake version
cmake_version = "3.22.1"

[android]
# Android project path
project_path = "android/main_android_sdk"

# Android SDK versions
compile_sdk = 34
build_tools = "34.0.0"
min_sdk = 19
app_min_sdk = 21
target_sdk = 34

# Android NDK version
ndk_version = "25.2.9519653"

# Android STL type: c++_shared or c++_static
stl = "c++_shared"

# Third-party libraries to merge into output library
merge_libs = []

# Libraries to exclude from merging
exclude_libs = []

# Default architectures for Android builds
default_archs = ["armeabi-v7a", "arm64-v8a", "x86_64"]

[ohos]
# OpenHarmony project path
project_path = "ohos/main_ohos_sdk"

# OHOS STL type: c++_shared or c++_static
stl = "c++_shared"

# Third-party libraries to merge into output library
merge_libs = []

# Libraries to exclude from merging
exclude_libs = []

# Default architectures for OHOS builds
default_archs = ["armeabi-v7a", "arm64-v8a", "x86_64"]

[apple]
# Common Apple platform exported header files (iOS/macOS/tvOS/watchOS)
# Platform-specific sections can override this if needed
export_headers = [
    { src = "include/{{ cpy_project_name | lower }}/base/verinfo.h", dest = "base" },
    { src = "include/{{ cpy_project_name | lower }}/api/apple/{{ cpy_project_name | capitalize }}.h", dest = "api" },
]

# Optional: Platform-specific overrides (uncomment if needed)
# [ios]
# export_headers = [...]
#
# [macos]
# export_headers = [...]
#
# [tvos]
# export_headers = [...]
#
# [watchos]
# export_headers = [...]

[windows]
# Windows exported header files
export_headers = [
    { src = "include/{{ cpy_project_name | lower }}/base/verinfo.h", dest = "base" },
    { src = "include/{{ cpy_project_name | lower }}/api/native/{{ cpy_project_name | lower }}.h", dest = "api" },
]

[linux]
# Linux exported header files (same as Windows)
export_headers = [
    { src = "include/{{ cpy_project_name | lower }}/base/verinfo.h", dest = "base" },
    { src = "include/{{ cpy_project_name | lower }}/api/native/{{ cpy_project_name | lower }}.h", dest = "api" },
]

[include]
# Include header files for SDK packaging
export_headers = [
    { src = "include/", dest = "." },
]

# ===================================================================
# Publish Configuration
# ===================================================================
# Maven publishing configuration for Android/JVM artifacts.
# Credentials are typically set via environment variables or gradle.properties
# for security reasons.
#
# Priority (high to low):
# 1. Environment variables
# 2. CCGO.toml
# 3. Project-level gradle.properties (in project root)
# 4. ~/.gradle/gradle.properties

[publish.android.maven]
# Maven group ID for publishing (e.g., "com.example.project")
group_id = "{{ cpy_project_group_id }}"

# Maven artifact ID (optional, defaults to project name)
# artifact_id = "{{ cpy_project_name | lower }}"

# Channel description for artifact naming (e.g., "beta", "release", or empty string)
channel_desc = ""

# Maven dependencies to include in POM file
# Format: { group = "com.example", artifact = "lib", version = "1.0.0" }
{% if cpy_project_dependencies and cpy_project_dependencies != "EMPTY" %}
dependencies = [
{% for dep in cpy_project_dependencies.split(',') %}{% if dep.strip() and ':' in dep.strip() %}{% set parts = dep.strip().split(':') %}    { group = "{{ parts[0] }}", artifact = "{{ parts[1] }}", version = "{{ parts[2] if parts|length > 2 else '1.0.0' }}" },
{% endif %}{% endfor %}]
{% else %}
dependencies = []
{% endif %}

# Optional Maven configuration (credentials should be in env vars or gradle.properties)
# local_path = "~/.m2/repository"
# custom_urls = "https://maven.example.com/releases"

# ===================================================================
# Apple Publish Configuration (CocoaPods & SPM)
# ===================================================================
# Configuration for publishing to Apple platforms via CocoaPods and Swift Package Manager.
# Use: ccgo publish apple --cocoapods / --spm / --all

[publish.apple]
# Pod/Package name (defaults to project name)
pod_name = "{{ cpy_project_name | capitalize }}"

# Target platforms for publishing (ios, macos, tvos, watchos, or "all")
platforms = ["ios", "macos"]

# Minimum deployment targets
min_ios_version = "13.0"
min_macos_version = "10.15"
min_tvos_version = "13.0"
min_watchos_version = "6.0"

# Summary/description for the package
summary = "{{ cpy_project_name }} library"
# description = "A more detailed description of the library"

[publish.apple.cocoapods]
# Enable/disable CocoaPods publishing
enabled = true

# Repository: "trunk" for public CocoaPods, or URL for private spec repo
repo = "trunk"

# Private spec repo URL (required if repo = "private")
# spec_repo = "https://github.com/yourorg/Specs.git"

# License type
license = "MIT"

# Homepage URL
{% if cpy_git_repo_url %}homepage = "{{ cpy_git_repo_url }}"{% else %}# homepage = "https://github.com/yourorg/yourproject"{% endif %}

# URL to hosted XCFramework zip (for binary distribution)
# source_url = "https://github.com/yourorg/yourproject/releases/download/v1.0.0/YourProject.xcframework.zip"

# Use static framework linking (default: true)
static_framework = true

[publish.apple.spm]
# Enable/disable Swift Package Manager publishing
enabled = true

# Git URL for the package (defaults to git remote origin)
{% if cpy_git_repo_url %}git_url = "{{ cpy_git_repo_url }}"{% else %}# git_url = "https://github.com/yourorg/yourproject"{% endif %}

# URL to hosted XCFramework zip (for remote binary distribution)
# xcframework_url = "https://github.com/yourorg/yourproject/releases/download/v1.0.0/YourProject.xcframework.zip"

# Use local path instead of URL (for development)
use_local_path = true

# ===================================================================
# Dependencies (Optional)
# ===================================================================
# Similar to Cargo.toml, CCGO supports dependency management.
# Dependencies can be specified from git repositories, local paths,
# or with platform-specific configurations.

# [dependencies]
# Example: Git dependency with default branch
# my_lib = { git = "https://github.com/user/my_lib.git" }

# Example: Git dependency with specific branch
# feature_lib = { git = "https://github.com/user/feature_lib.git", branch = "develop" }

# Example: Git dependency with specific tag
# stable_lib = { git = "https://github.com/user/stable_lib.git", tag = "v1.2.3" }

# Example: Git dependency with specific commit
# pinned_lib = { git = "https://github.com/user/pinned_lib.git", rev = "0c0990399270277832fbb5b91a1fa118e6f63dba" }

# Example: Git dependency with PR reference
# pr_lib = { git = "https://github.com/user/pr_lib.git", rev = "refs/pull/493/head" }

# Example: Local path dependency (relative to project root)
# local_lib = { path = "vendor/local_lib" }

# Example: Local path dependency with version
# versioned_local = { path = "../shared_lib", version = "2.0.0" }

# Platform-specific dependencies (only included for specific platforms)
# [target.'cfg(windows)'.dependencies]
# win_specific = { git = "https://github.com/user/windows_lib.git" }

# [target.'cfg(unix)'.dependencies]
# unix_specific = { path = "vendor/unix_lib" }

# [target.'cfg(target_arch = "x86")'.dependencies]
# x86_lib = { path = "native/i686" }
